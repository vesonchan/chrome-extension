# 多重倒计时器 Chrome 扩展

一个功能强大的Chrome扩展，可以设置多个倒计时器并在图标上显示最短剩余时间。特别针对Mac系统进行了通知兼容性优化。

## 功能特性

- 设置多个不同时长的倒计时器
- 同时运行所有倒计时器
- 在扩展图标上显示剩余时间最短的倒计时
- 倒计时结束时显示通知
- 定时自动开始和停止功能
- 倒计时自动循环，直到手动停止
- 完善的Mac兼容性支持
- 内置通知权限检查和诊断工具

## 安装方法

1. 下载或克隆此代码库
2. 打开Chrome浏览器，进入扩展管理页面（chrome://extensions/）
3. 启用"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择此项目的文件夹

## 使用方法

1. 点击扩展图标打开弹出窗口
2. 输入分钟数并点击"添加倒计时"按钮
3. 添加多个倒计时（如需）
4. 可选设置定时开始和停止时间
5. 点击"开始所有倒计时"按钮启动倒计时
6. 查看浏览器工具栏上的扩展图标显示剩余时间最短的倒计时
7. 倒计时结束时将收到通知，并自动开始下一轮
8. 要停止所有倒计时，点击"停止所有倒计时"按钮

## 🍎 Mac用户通知设置指南

**如果在Mac上没有收到通知，请按以下步骤操作：**

### 1. 检查Chrome通知权限
- 打开Chrome → 设置 → 隐私和安全 → 网站设置 → 通知
- 确保"允许网站发送通知"已开启
- 检查是否有特定网站被阻止

### 2. 检查macOS系统通知权限
- 打开"系统偏好设置" → "通知与专注模式"
- 在左侧列表中找到"Google Chrome"
- 确保以下设置已启用：
  - ✅ 允许通知
  - ✅ 在锁定屏幕上显示
  - ✅ 在通知中心显示
  - 通知样式选择"横幅"或"提醒"

### 3. 检查勿扰模式设置
- 点击菜单栏右上角的控制中心
- 确保"勿扰模式"已关闭
- 或者在通知设置中将Chrome添加到"突破过滤条件的App"列表

### 4. 使用扩展自带的诊断工具
- 点击扩展弹窗中的"⚙️ 通知设置"按钮
- 运行"测试通知"功能来检验通知是否正常工作
- 查看权限检查结果和系统信息
- 如果测试通知失败，会显示详细的错误信息

### 5. 故障排除步骤
1. **重启浏览器**：完全关闭并重新启动Chrome浏览器
2. **重新加载扩展**：在扩展设置页面中点击"重新加载扩展"
3. **检查Chrome版本**：确保使用最新版本的Chrome浏览器
4. **清除扩展数据**：在诊断页面中清除扩展数据并重新设置
5. **重启系统**：如果以上步骤都无效，尝试重启Mac系统

### 6. 备选通知方案
如果系统通知仍然无法正常工作，扩展会自动启用备选方案：
- 使用浏览器原生alert弹窗
- 在控制台中记录详细的错误信息
- 提供完整的故障排除日志

## 文件说明

- `manifest.json` - 扩展配置文件和权限声明
- `popup.html/js/css` - 主弹出界面
- `background.js` - 后台脚本处理计时逻辑和通知
- `options.html/js` - 设置和诊断页面
- `content.js` - 内容脚本（备选通知方案）
- `generate_number_icons.html` - 生成数字图标的工具

## 技术特性

- 使用Chrome Extensions Manifest V3
- 支持多重倒计时并发运行
- 动态图标显示最短时间
- 持久化存储倒计时状态
- 定时任务自动执行
- 跨平台通知兼容性

## 更新日志

### v1.1 (最新)
- 🔧 修复Mac上通知不显示的问题
- ⚙️ 添加通知权限检查和诊断工具
- 🔄 增加备选通知方案
- 🎯 优化通知交互体验
- 📱 改进Mac系统兼容性
- 🐛 修复权限相关错误

### v1.0 (初始版本)
- 基础倒计时功能
- 图标动态显示
- 基本通知功能

## 开发说明

此扩展使用纯JavaScript、HTML和CSS构建，采用Chrome扩展API管理倒计时和通知系统。针对macOS平台进行了特别优化，确保通知功能在各种系统配置下都能正常工作。 